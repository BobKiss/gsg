!function(b,e,f){b.fn.yith_wcbk_people_selector=function(l){var a=this,s=b(this),c=!1,i="",e=!1,o=function(){b(f).on("click",_),b(f).on("click","."+l["class"],function(e){e.stopPropagation()});var e=b(".yith_wcbk_booking_product_form_widget"),o=s.attr("id"),n=!!o&&b('label[for="'+o+'"]');e.on("click",_),e.on("click","."+l["class"],function(e){e.stopPropagation()}),s.on("click",l.openHandler_selector,p),s.on("click",l.closeHandler_selector,_),s.on("click",l.toggleHandler_selector,u),s.on("open",p),s.on("close",_),c.on("change",r),n&&n.length&&n.on("click",u)},n=function(){var e=s.data("min"),o=s.data("max");a.min=void 0!==e&&parseInt(e),a.max=void 0!==o&&parseInt(o)},t=function(){i=s.find(l.totals_selector)||"",e=s.find(l.fieldsContainer_selector)||"",(c=s.find(l.field_selector)||!1)&&c.each(function(){b(this).yith_wcbk_people_selector_field({canIncreaseGlobal:function(){return!1===a.max||a.value<a.max},canDecreaseGlobal:function(){return!1===a.min||a.value>a.min},onUpdate:function(){c.trigger("enableDisableButtons")}})})},r=function(e){var o,n,t=e||!0;n=0,c&&c.each(function(){n+=parseInt(b(this).yith_wcbk_people_selector_field("getValue"))}),a.value=n,o=1<a.value?l.plural_label.replace("%s",a.value.toString()):1===a.value?l.singular_label:l.zero_label,i.text(o),t&&s.trigger("change")},p=function(){s.removeClass(l.closed_class).addClass(l.opened_class),e&&e.show(),l.onOpen()},_=function(){s.removeClass(l.opened_class).addClass(l.closed_class),e&&e.hide(),l.onClose()},u=function(e){"object"==typeof e&&"undefined"!=typeof e.stopPropagation&&e.stopPropagation(),s.hasClass(l.opened_class)?_():p()},d={zero_label:yith_people_selector_params.i18n_zero_person,singular_label:yith_people_selector_params.i18n_one_person,plural_label:yith_people_selector_params.i18n_more_persons,"class":"yith-wcbk-people-selector",totals_selector:".yith-wcbk-people-selector__totals",closeHandler_selector:".yith-wcbk-people-selector__close-handler",openHandler_selector:".yith-wcbk-people-selector__open-handler",toggleHandler_selector:".yith-wcbk-people-selector__toggle-handler",fieldsContainer_selector:".yith-wcbk-people-selector__fields-container",field_selector:".yith-wcbk-people-selector__field",opened_class:"yith-wcbk-people-selector--opened",closed_class:"yith-wcbk-people-selector--closed",onOpen:function(){},onClose:function(){}};return l=b.extend({},d,l),a.val=function(){return a.value},a.value=0,n(),t(),o(),r(!1),_(),s},b.fn.yith_wcbk_people_selector_field=function(e){var s=this,c=b(this),i=!1,r=!1,o=!1,n=!1,t=function(){i=c.find(s.options.value_selector)||!1,r=c.find(s.options.total_selector)||!1,o=c.find(s.options.plus_selector)||!1,n=c.find(s.options.minus_selector)||!1},l=function(){c.on("click",s.options.plus_selector,function(){s.canIncrease()&&d()}),c.on("click",s.options.minus_selector,function(){s.canDecrease()&&u()}),c.on("enableDisableButtons",s.enableDisableButtons)},a=function(){var e=c.data("min"),o=c.data("max");s.min=void 0!==e&&parseInt(e),s.max=void 0!==o&&parseInt(o)},p=function(e,o){if(i&&void 0!==e){var n=e;!1!==s.min&&(n=Math.max(s.min,parseInt(n))),!1!==s.max&&(n=Math.min(s.max,parseInt(n))),n=parseInt(n),i.val(n),c.data("value",n),l=void 0===(t=o)||t,a=_(),r&&r.text(a),i&&i.val(a),l&&i.trigger("change"),s.enableDisableButtons(),s.options.onUpdate()}var t,l,a},_=function(){var e=0;return i&&(e=i.val()||0),parseInt(e)},u=function(e){var o=void 0===e||isNaN(e)?1:parseInt(e),n=_();o=parseInt(o),p(n-o)},d=function(e){var o=void 0===e||isNaN(e)?1:parseInt(e),n=_();o=parseInt(o),p(n+o)},f={value_selector:".yith-wcbk-people-selector__field__value",total_selector:".yith-wcbk-people-selector__field__total",plus_selector:".yith-wcbk-people-selector__field__plus",minus_selector:".yith-wcbk-people-selector__field__minus",buttonDisabledClass:"yith-wcbk-people-selector__field__button--disabled",canIncreaseGlobal:function(){return!0},canDecreaseGlobal:function(){return!0},onUpdate:function(){}};return s.canIncrease=function(){var e=!0;return!1!==s.max&&(e=_()<s.max),e&&s.options.canIncreaseGlobal()},s.canDecrease=function(){var e=!0;return!1!==s.min&&(e=_()>s.min),e&&s.options.canDecreaseGlobal()},s.enableDisableButtons=function(){s.canIncrease()?o.removeClass(s.options.buttonDisabledClass):o.addClass(s.options.buttonDisabledClass),s.canDecrease()?n.removeClass(s.options.buttonDisabledClass):n.addClass(s.options.buttonDisabledClass)},"getValue"===(e=void 0!==e?e:{})?c.data("value")||0:(s.options=b.extend({},f,e),a(),t(),l(),p(_(),!1),c)}}(jQuery,window,document);